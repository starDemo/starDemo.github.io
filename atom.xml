<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://stardemo.github.io</id>
    <title>Zone</title>
    <updated>2021-05-07T15:50:55.770Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://stardemo.github.io"/>
    <link rel="self" href="https://stardemo.github.io/atom.xml"/>
    <subtitle>ä¸€ä¸ªæŠ€æœ¯çˆ±å¥½è€…çš„å¤‡å¿˜å½•</subtitle>
    <logo>https://stardemo.github.io/images/avatar.png</logo>
    <icon>https://stardemo.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, Zone</rights>
    <entry>
        <title type="html"><![CDATA[è®°å½•ä¸€æ¬¡æœåŠ¡å™¨ç£ç›˜å®¹é‡ä¸è¶³çš„æ¸…ç†è¿‡ç¨‹]]></title>
        <id>https://stardemo.github.io/post/ji-lu-yi-ci-fu-wu-qi-ci-pan-rong-liang-bu-zu-de-qing-li-guo-cheng/</id>
        <link href="https://stardemo.github.io/post/ji-lu-yi-ci-fu-wu-qi-ci-pan-rong-liang-bu-zu-de-qing-li-guo-cheng/">
        </link>
        <updated>2021-05-07T12:57:01.000Z</updated>
        <summary type="html"><![CDATA[<p>é‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜</p>
<ul>
<li><code>/var/spool/postfix/maildrop</code>äº§ç”Ÿå¤§é‡æ–‡ä»¶</li>
<li>ç›®å½•ä¸­æ–‡ä»¶è¿‡å¤šå¯¼è‡´lså‘½ä»¤å¡ä½</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<p>é‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜</p>
<ul>
<li><code>/var/spool/postfix/maildrop</code>äº§ç”Ÿå¤§é‡æ–‡ä»¶</li>
<li>ç›®å½•ä¸­æ–‡ä»¶è¿‡å¤šå¯¼è‡´lså‘½ä»¤å¡ä½</li>
</ul>
<!-- more -->
<h2 id="å‰å› ">å‰å› </h2>
<p>æ”¶åˆ°æœåŠ¡å™¨æŠ¥è­¦é‚®ä»¶ï¼Œç£ç›˜ä½¿ç”¨ç‡è¶…è¿‡ç™¾åˆ†ä¹‹97ï¼Œé‚ä¸Šçº¿æ£€æŸ¥æ¸…ç†</p>
<h3 id="æ£€æŸ¥ç›®å½•å ç”¨æƒ…å†µ">æ£€æŸ¥ç›®å½•å ç”¨æƒ…å†µ</h3>
<p>ç¬¨åŠæ³•ï¼Œ<code>du -sh *</code> æŸ¥çœ‹ç›®å½•/æ–‡ä»¶å¤§å°ï¼Œå‘ç°å¡åœ¨<code>var</code>ç›®å½•ä¸‹ï¼Œè¿›å…¥ç›®å½•ç»§ç»­æµ‹è¯•ï¼Œå‘ç°æœ€ç»ˆå¡åœ¨<code>/var/spool/postfix/maildrop</code>ä¸‹ï¼Œè¿›å…¥ç›®å½•ï¼Œls å‘ç°lså¡æ­»ï¼Œéœ€è¦kil æ‰èƒ½æ¢å¤ï¼Œ<code>ls -l |wc -l</code>åŒæ ·ç»“æœï¼Œé‚å¼€å§‹ç ”ç©¶é—®é¢˜ã€‚</p>
<h2 id="é—®é¢˜1-varspoolpostfixmaildropäº§ç”Ÿå¤§é‡æ–‡ä»¶">é—®é¢˜1.  <code>/var/spool/postfix/maildrop</code>äº§ç”Ÿå¤§é‡æ–‡ä»¶</h2>
<p>crontab æ¯æ¬¡æ‰§è¡Œä»»åŠ¡åä¼šå‘é€é‚®ä»¶ï¼Œæ¥å—è€…æ˜¯åœ¨ä»–çš„é…ç½®æ–‡ä»¶ â€œ/etc/crontabâ€ é€šè¿‡ MAILTO=rootâ€™ æ¥è®¾ç½®çš„ï¼Œé»˜è®¤æ˜¯rootã€‚å‘é€åçš„é‚®ä»¶å°±åˆ°<code>/var/spool/postfix/maildrop</code>ä¸‹äº†ã€‚</p>
<p>å¦‚æœéœ€è¦é‚®ä»¶å‘é€åˆ°æŒ‡å®šé‚®ç®±ï¼Œåˆ™éœ€è¦é…ç½®æ­¤å¤„ã€‚</p>
<p>ç»§ç»­æ£€æŸ¥å‘ç°å‘ç°æœåŠ¡å™¨ä¸Šæœ‰å¾ˆå¤šcrontabä»»åŠ¡ï¼Œå› è€Œåˆ¤æ–­å‘é€å¤ªå¤šé‚®ä»¶åˆ°maildropä¸‹å¯¼è‡´æ–‡ä»¶è¶…å¤šã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3>
<h4 id="æ–¹æ¡ˆ1">æ–¹æ¡ˆ1</h4>
<pre><code>ä¿®æ”¹â€œ/etc/crontabâ€
å°†â€˜MAILTO=rootâ€™æ›¿æ¢æˆâ€˜MAILTO=&quot;&quot;â€™ä¿®æ”¹ä¹‹åæ²¡æœ‰æˆåŠŸï¼Œéœ€è¦é‡å¯crondæœåŠ¡æ‰å¯ä»¥
ä¹Ÿå¯ä»åœ¨crontabï¼ˆcrontab -eï¼‰ä¸­æœ€å‰é¢ç›´æ¥åŠ å…¥MAILTO=&quot;&quot;
</code></pre>
<h4 id="æ–¹æ¡ˆ2">æ–¹æ¡ˆ2</h4>
<p>å¦‚æœæ˜¯æˆ‘ä»¬ä¸å…³å¿ƒçš„å¤‡æ³¨å‹ç­‰è¾“å‡ºæˆ‘ä»¬å®Œå…¨å¯ä»¥è®©å…¶è¾“å‡ºåˆ° <code>/dev/null</code> è¿™æ ·å°±ä¸ä¼šå› ä¸ºå‘é€å¤±è´¥åˆ°å¯¼è‡´åœ¨<code>/var/spool/postfix/maildrop</code>ä¸‹é¢äº§å‡ºä»€ä¹ˆæ–‡ä»¶ã€‚<br>
å¦‚æœéœ€è¦æ”¶é›†è¾“å‡ºlogï¼Œå¯åœ¨<code>crontab job</code>åå¢åŠ <code>&gt;</code>å®šå‘è¾“å‡º<br>
ä¾‹å¦‚ï¼š</p>
<pre><code class="language-shell"># è¾“å‡ºç©º
*/10 * * * * /tmp/test.sh &gt;/dev/null 2&gt;&amp;1
# å®šå‘è¾“å‡ºåˆ°æ–‡ä»¶
*/10 * * * * /tmp/test.sh &gt;/log/test.log 2&gt;&amp;1
</code></pre>
<h3 id="ç»“æœ">ç»“æœ</h3>
<p>ä½¿ç”¨<code>æ–¹æ¡ˆ1</code>åé‡å¯crondæœåŠ¡ï¼Œåˆ™ä¸ä¼šäº§ç”Ÿæ–°çš„æ–‡ä»¶ã€‚</p>
<h2 id="é—®é¢˜2-ç›®å½•ä¸­æ–‡ä»¶è¿‡å¤šå¯¼è‡´lså‘½ä»¤å¡ä½">é—®é¢˜2. ç›®å½•ä¸­æ–‡ä»¶è¿‡å¤šå¯¼è‡´lså‘½ä»¤å¡ä½</h2>
<h3 id="è§£å†³æ–¹æ¡ˆ-2">è§£å†³æ–¹æ¡ˆ</h3>
<p>å¦‚æœéœ€è¦ç«‹é©¬æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œåˆ™ä½¿ç”¨</p>
<pre><code class="language-shell">ls -1 -f 
# åˆ é™¤æ–‡ä»¶
ls -1 -f | xargs rm
</code></pre>
<p>å³å¯ç«‹é©¬æ˜¾ç¤ºæ–‡ä»¶ã€‚</p>
<h3 id="é—®é¢˜åŸå› ">é—®é¢˜åŸå› </h3>
<p>(https://www.jianshu.com/p/353a5dbcd423)[https://www.jianshu.com/p/353a5dbcd423]</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[[é¢ç»] å¸¸è§é¢è¯•é—®ç­”æ•´ç†]]></title>
        <id>https://stardemo.github.io/post/mian-jing-chang-jian-mian-shi-wen-da-zheng-li/</id>
        <link href="https://stardemo.github.io/post/mian-jing-chang-jian-mian-shi-wen-da-zheng-li/">
        </link>
        <updated>2021-04-26T14:03:05.000Z</updated>
        <summary type="html"><![CDATA[<p>æ”¶é›†å„è·¯é¢è¯•é—®ç­”ï¼Œåšä¸€ä¸ªè®°å½•</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ”¶é›†å„è·¯é¢è¯•é—®ç­”ï¼Œåšä¸€ä¸ªè®°å½•</p>
<!-- more -->
<h2 id="1-ç½‘ç»œåŸºç¡€">1. ç½‘ç»œåŸºç¡€</h2>
<h3 id="11-é—®ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹">1.1 é—®ï¼šä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</h3>
<p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼šä¸ºäº†ç¡®è®¤å¯¹æ–¹çš„å‘é€å’Œæ¥æ”¶èƒ½åŠ›ã€‚</p>
<h4 id="ä¸‰æ¬¡æ¡æ‰‹">ä¸‰æ¬¡æ¡æ‰‹</h4>
<p>ä¸‰æ¬¡æ¡æ‰‹ä¸»è¦æµç¨‹ï¼š</p>
<ul>
<li>ä¸€å¼€å§‹åŒæ–¹å¤„äº <code>CLOSED</code>çŠ¶æ€ï¼Œç„¶åæœåŠ¡ç«¯å¼€å§‹ç›‘å¬æŸä¸ªç«¯å£è¿›å…¥ <code>LISTEN</code> çŠ¶æ€</li>
<li>ç„¶åå®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¿æ¥ï¼Œå‘é€ <code>SYN</code>ï¼Œç„¶åè‡ªå·±å˜ä¸º <code>SYN-SENT</code>ï¼Œ<code>seq = x</code></li>
<li>æœåŠ¡ç«¯æ”¶åˆ°ä¹‹åï¼Œè¿”å› <code>SYN seq = y</code> å’Œ <code>ACK ack = x + 1</code>ï¼ˆå¯¹äºå®¢æˆ·ç«¯å‘æ¥çš„ SYNï¼‰ï¼Œè‡ªå·±å˜æˆ <code>SYN-REVD</code></li>
<li>ä¹‹åå®¢æˆ·ç«¯å†æ¬¡å‘é€ <code>ACK seq = x + 1</code>,<code>ack = y + 1</code>ç»™æœåŠ¡ç«¯ï¼Œè‡ªå·±å˜æˆ <code>EASTABLISHED</code> çŠ¶æ€ï¼ŒæœåŠ¡ç«¯æ”¶åˆ° <code>ACK</code>ï¼Œä¹Ÿè¿›å…¥<code>ESTABLISHED</code></li>
</ul>
<p><code>SYN éœ€è¦å¯¹ç«¯ç¡®è®¤ï¼Œæ‰€ä»¥ ACK çš„åºåˆ—åŒ–è¦åŠ ä¸€ï¼Œå‡¡æ˜¯éœ€è¦å¯¹ç«¯ç¡®è®¤çš„ï¼Œä¸€ç‚¹è¦æ¶ˆè€— TCP æŠ¥æ–‡çš„åºåˆ—åŒ–</code></p>
<h4 id="ä¸ºä»€ä¹ˆä¸æ˜¯ä¸¤æ¬¡">ä¸ºä»€ä¹ˆä¸æ˜¯ä¸¤æ¬¡ï¼Ÿ</h4>
<p><code>æ— æ³•ç¡®è®¤å®¢æˆ·ç«¯çš„æ¥æ”¶èƒ½åŠ›ã€‚</code></p>
<p>å¦‚æœé¦–å…ˆå®¢æˆ·ç«¯å‘é€äº† SYN æŠ¥æ–‡ï¼Œä½†æ˜¯æ»ç•™åœ¨ç½‘ç»œä¸­ï¼ŒTCP ä»¥ä¸ºä¸¢åŒ…äº†ï¼Œç„¶åé‡ä¼ ï¼Œä¸¤æ¬¡æ¡æ‰‹å»ºç«‹äº†è¿æ¥ã€‚<br>
ç­‰åˆ°å®¢æˆ·ç«¯å…³é—­è¿æ¥äº†ã€‚ä½†æ˜¯ä¹‹åè¿™ä¸ªåŒ…å¦‚æœåˆ°è¾¾äº†æœåŠ¡ç«¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯æ¥æ”¶åˆ°äº†ï¼Œç„¶åå‘é€ç›¸åº”çš„æ•°æ®è¡¨ï¼Œå°±å»ºç«‹äº†é“¾æ¥ï¼Œä½†æ˜¯æ­¤æ—¶å®¢æˆ·ç«¯å·²ç»å…³é—­è¿æ¥äº†ï¼Œæ‰€ä»¥å¸¦æ¥äº†é“¾æ¥èµ„æºçš„æµªè´¹ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆä¸æ˜¯å››æ¬¡">ä¸ºä»€ä¹ˆä¸æ˜¯å››æ¬¡ï¼Ÿ</h4>
<p><code>å››æ¬¡ä»¥ä¸Šéƒ½å¯ä»¥ï¼Œåªä¸è¿‡ ä¸‰æ¬¡å°±å¤Ÿäº†</code></p>
<h4 id="å››æ¬¡æŒ¥æ‰‹">å››æ¬¡æŒ¥æ‰‹</h4>
<ul>
<li>ä¸€å¼€å§‹éƒ½å¤„äº ESTABLISH çŠ¶æ€ï¼Œç„¶åå®¢æˆ·ç«¯å‘é€ FIN æŠ¥æ–‡ï¼Œå¸¦ä¸Š seq = pï¼ŒçŠ¶æ€å˜ä¸º FIN-WAIT-1</li>
<li>æœåŠ¡ç«¯æ”¶åˆ°ä¹‹åï¼Œå‘é€ ACK ç¡®è®¤ï¼Œack = p + 1ï¼Œç„¶åè¿›å…¥ CLOSE-WAIT çŠ¶æ€</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°ä¹‹åè¿›å…¥ FIN-WAIT-2Â  çŠ¶æ€</li>
<li>è¿‡äº†ä¸€ä¼šç­‰æ•°æ®å¤„ç†å®Œï¼Œå†æ¬¡å‘é€ FINã€ACKï¼Œseq = qï¼Œack = p + 1ï¼Œè¿›å…¥ LAST-ACK é˜¶æ®µ</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ° FIN ä¹‹åï¼Œå®¢æˆ·ç«¯æ”¶åˆ°ä¹‹åè¿›å…¥ TIME_WAITï¼ˆç­‰å¾… 2MSLï¼‰ï¼Œç„¶åå‘é€ ACK ç»™æœåŠ¡ç«¯ ack = 1 + 1</li>
<li>æœåŠ¡ç«¯æ”¶åˆ°ä¹‹åè¿›å…¥ CLOSED çŠ¶æ€</li>
</ul>
<p>å®¢æˆ·ç«¯è¿™ä¸ªæ—¶å€™è¿˜éœ€è¦ç­‰å¾…ä¸¤æ¬¡ MSL ä¹‹åï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°æœåŠ¡ç«¯çš„é‡å‘è¯·æ±‚ï¼Œå°±è¡¨æ˜ ACK æˆåŠŸåˆ°è¾¾ï¼ŒæŒ¥æ‰‹ç»“æŸï¼Œå®¢æˆ·ç«¯å˜ä¸º CLOSED çŠ¶æ€ï¼Œå¦åˆ™è¿›è¡Œ ACK é‡å‘</p>
<h4 id="ä¸ºä»€ä¹ˆéœ€è¦ç­‰å¾…-2mslmaximum-segement-lifetime">ä¸ºä»€ä¹ˆéœ€è¦ç­‰å¾… 2MSLï¼ˆMaximum Segement Lifetimeï¼‰ï¼š</h4>
<p>å› ä¸ºå¦‚æœä¸ç­‰å¾…çš„è¯ï¼Œå¦‚æœæœåŠ¡ç«¯è¿˜æœ‰å¾ˆå¤šæ•°æ®åŒ…è¦ç»™å®¢æˆ·ç«¯å‘ï¼Œä¸”æ­¤æ—¶å®¢æˆ·ç«¯ç«¯å£è¢«æ–°åº”ç”¨å æ®ï¼Œé‚£ä¹ˆå°±ä¼šæ¥æ”¶åˆ°æ— ç”¨çš„æ•°æ®åŒ…ï¼Œé€ æˆæ•°æ®åŒ…æ··ä¹±ï¼Œæ‰€ä»¥è¯´æœ€ä¿é™©çš„æ–¹æ³•å°±æ˜¯ç­‰æœåŠ¡å™¨å‘æ¥çš„æ•°æ®åŒ…éƒ½æ­»ç¿˜ç¿˜äº†å†å¯åŠ¨æ–°åº”ç”¨ã€‚</p>
<ul>
<li>1ä¸ª MSL ä¿è¯å››æ¬¡æŒ¥æ‰‹ä¸­ä¸»åŠ¨å…³é—­æ–¹æœ€åçš„ ACK æŠ¥æ–‡èƒ½æœ€ç»ˆåˆ°è¾¾å¯¹ç«¯</li>
<li>1ä¸ª MSL ä¿è¯å¯¹ç«¯æ²¡æœ‰æ”¶åˆ° ACK é‚£ä¹ˆè¿›è¡Œé‡ä¼ çš„ FIN æŠ¥æ–‡èƒ½å¤Ÿåˆ°è¾¾</li>
</ul>
<h4 id="ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡è€Œä¸æ˜¯ä¸‰æ¬¡">ä¸ºä»€ä¹ˆæ˜¯å››æ¬¡è€Œä¸æ˜¯ä¸‰æ¬¡ï¼Ÿ</h4>
<p>å¦‚æœæ˜¯ä¸‰æ¬¡çš„è¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯çš„ ACK å’Œ FIN åˆæˆä¸€ä¸ªæŒ¥æ‰‹ï¼Œé‚£ä¹ˆé•¿æ—¶é—´çš„å»¶è¿Ÿå¯èƒ½è®© TCP ä¸€ä½ FIN æ²¡æœ‰è¾¾åˆ°æœåŠ¡å™¨ç«¯ï¼Œç„¶åè®©å®¢æˆ·çš„ä¸æ–­çš„é‡å‘ FIN</p>
<h4 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h4>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/86426969">https://zhuanlan.zhihu.com/p/86426969</a></li>
<li><a href="https://juejin.cn/post/6844904070889603085">https://juejin.cn/post/6844904070889603085</a></li>
</ul>
<h2 id="n-è½¬è½½æº">n. è½¬è½½æº</h2>
<ul>
<li><a href="https://juejin.cn/post/6939691851746279437">juejin-å›¾é›€ç¤¾åŒº-å­—èŠ‚è·³åŠ¨æœ€çˆ±è€ƒçš„å‰ç«¯é¢è¯•é¢˜ï¼šè®¡ç®—æœºç½‘ç»œåŸºç¡€</a></li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[MacOS ä¸‹ä½¿ç”¨nvmç®¡ç†nodeç¯å¢ƒ]]></title>
        <id>https://stardemo.github.io/post/macos-xia-shi-yong-nvm-guan-li-node-huan-jing/</id>
        <link href="https://stardemo.github.io/post/macos-xia-shi-yong-nvm-guan-li-node-huan-jing/">
        </link>
        <updated>2021-04-13T02:34:06.000Z</updated>
        <summary type="html"><![CDATA[<p>nodeç‰ˆæœ¬å˜åŒ–æœ‰äº›å¿«ï¼Œéœ€è¦åˆ‡æ¢ä¸åŒç‰ˆæœ¬æ„å»ºé¡¹ç›®ï¼Œä½¿ç”¨nvmç®¡ç†nodeæ˜¯ä¸€ä¸ªæ¯”è¾ƒæˆç†Ÿçš„æ–¹æ¡ˆã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>nodeç‰ˆæœ¬å˜åŒ–æœ‰äº›å¿«ï¼Œéœ€è¦åˆ‡æ¢ä¸åŒç‰ˆæœ¬æ„å»ºé¡¹ç›®ï¼Œä½¿ç”¨nvmç®¡ç†nodeæ˜¯ä¸€ä¸ªæ¯”è¾ƒæˆç†Ÿçš„æ–¹æ¡ˆã€‚</p>
<!-- more -->
<h2 id="1-å®‰è£…nvm">1. å®‰è£…nvm</h2>
<h3 id="11-macos">1.1 MacOS</h3>
<ul>
<li>brewå®‰è£…</li>
</ul>
<pre><code class="language-shell">brew install nvm 
</code></pre>
<ul>
<li>å®˜æ–¹è„šæœ¬</li>
</ul>
<pre><code class="language-shell">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash
</code></pre>
<h3 id="12-linux">1.2 Linux</h3>
<pre><code class="language-shell">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash
</code></pre>
<h3 id="13-å®‰è£…æ³¨æ„äº‹é¡¹">1.3 å®‰è£…æ³¨æ„äº‹é¡¹</h3>
<pre><code>==&gt; Caveats
Please note that upstream has asked us to make explicit managing
nvm via Homebrew is unsupported by them and you should check any
problems against the standard nvm install method prior to reporting.

You should create NVM's working directory if it doesn't exist:

  mkdir ~/.nvm

Add the following to ~/.zshrc or your desired shell
configuration file:

  export NVM_DIR=&quot;$HOME/.nvm&quot;
  [ -s &quot;/opt/homebrew/opt/nvm/nvm.sh&quot; ] &amp;&amp; . &quot;/opt/homebrew/opt/nvm/nvm.sh&quot;  # This loads nvm
  [ -s &quot;/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm&quot; ] &amp;&amp; . &quot;/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm&quot;  # This loads nvm bash_completion

You can set $NVM_DIR to any location, but leaving it unchanged from
/opt/homebrew/opt/nvm will destroy any nvm-installed Node installations
upon upgrade/reinstall.

Type `nvm help` for further information.

</code></pre>
<ul>
<li>åˆ›å»ºnvmç›®å½•</li>
</ul>
<pre><code class="language-shell">mkdir ~/.nvm
</code></pre>
<ul>
<li>å¤„ç†<code>~/.zshrc</code>æˆ–è€…<code>~/.bashrc</code>ï¼ˆæ­¤å¤„zshä¸¾ä¾‹ï¼‰</li>
</ul>
<pre><code class="language-shell">  export NVM_DIR=&quot;$HOME/.nvm&quot;
  [ -s &quot;/opt/homebrew/opt/nvm/nvm.sh&quot; ] &amp;&amp; . &quot;/opt/homebrew/opt/nvm/nvm.sh&quot;  # This loads nvm
  [ -s &quot;/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm&quot; ] &amp;&amp; . &quot;/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm&quot;  # This loads nvm bash_completion
</code></pre>
<h2 id="2-é…ç½®é•œåƒåŠ é€Ÿ">2. é…ç½®é•œåƒåŠ é€Ÿ</h2>
<h3 id="21-nvmåŠ é€Ÿ">2.1 nvmåŠ é€Ÿ</h3>
<p>éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡<code>NVM_NODEJS_ORG_MIRROR</code></p>
<pre><code class="language-shell"># ä¸´æ—¶è®¾ç½®
export NVM_NODEJS_ORG_MIRROR=http://npm.taobao.org/mirrors/node
# é…ç½®ä¸Šè¿°å‘½ä»¤åˆ°bashrc/zshrcä¸­ä¿æŒç”Ÿæ•ˆ
</code></pre>
<h3 id="22-npmåŠ é€Ÿ">2.2 npmåŠ é€Ÿ</h3>
<pre><code class="language-shell"># æŸ¥çœ‹å½“å‰registry
npm config -g get registry
# è®¾ç½®registry
npm config -g set registry https://registry.npm.taobao.org
</code></pre>
<h3 id="23-yarné…ç½®">2.3 yarné…ç½®</h3>
<pre><code class="language-shell"># å®‰è£…yarn
npm install -g yarn
# æŸ¥çœ‹yarn registry
yarn config get registry
# è®¾ç½®yarn registry
yarn config set registry http://registry.npm.taobao.org/
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Git HTTP+SSH ä»£ç†é…ç½®]]></title>
        <id>https://stardemo.github.io/post/git-httpssh-dai-li-pei-zhi/</id>
        <link href="https://stardemo.github.io/post/git-httpssh-dai-li-pei-zhi/">
        </link>
        <updated>2021-04-07T15:57:20.000Z</updated>
        <summary type="html"><![CDATA[<p>githubè®¿é—®æ—¥ç›Šå›°éš¾,é…ç½®gitæœåŠ¡ä»£ç†ä»¥å¿«é€Ÿcloneä»£ç ğŸ¶</p>
]]></summary>
        <content type="html"><![CDATA[<p>githubè®¿é—®æ—¥ç›Šå›°éš¾,é…ç½®gitæœåŠ¡ä»£ç†ä»¥å¿«é€Ÿcloneä»£ç ğŸ¶</p>
<!-- more -->
<p><em><strong>æŠ€æœ¯æ–¹æ¡ˆè½¬è½½äº<a href="http://www.chenhe.cc/p/406">http://www.chenhe.cc/p/406</a></strong></em></p>
<h2 id="http-ä»£ç†">HTTP ä»£ç†</h2>
<h3 id="é…ç½®å…¨å±€ä»£ç†">é…ç½®å…¨å±€ä»£ç†</h3>
<pre><code class="language-shell"># HTTP ä»£ç†
git config --global http.proxy http://127.0.0.1:7890
git config --global https.proxy http://127.0.0.1:7890

# Socks5 ä»£ç†
git config --global http.proxy socks5://127.0.0.1:7890
git config --global https.proxy socks5://127.0.0.1:7890
</code></pre>
<p>æ³¨æ„è¿™é‡Œçš„<code>socks5</code>ä»…ä»…æ˜¯ä»£ç†ä½¿ç”¨çš„åè®®ï¼Œå®ƒä¾ç„¶æ˜¯é’ˆå¯¹ http è®¾ç½®çš„ï¼Œæ‰€ä»¥ä»…å¯¹ http åè®®çš„ä»“åº“æœ‰æ•ˆã€‚ä½¿ç”¨ <code>git@xxx</code>è¿™ç§ ssh è¿æ¥çš„ä¸ä¼šä½¿ç”¨ä»£ç†ã€‚</p>
<h3 id="åˆ†åŸŸåè®¾ç½®ä»£ç†">åˆ†åŸŸåè®¾ç½®ä»£ç†</h3>
<pre><code class="language-shell">git config --global http.https://github.com.proxy http://127.0.0.1:7890
git config --global https.https://github.com.proxy https://127.0.0.1:7890
</code></pre>
<h2 id="ssh-ä»£ç†">SSH ä»£ç†</h2>
<p>SSH ä»£ç†éœ€è¦åœ¨å¯†é’¥ç›®å½• (<code>~/.ssh</code>) (Windows ä¸‹æ˜¯ <code>C:\Users\{UserName}\.ssh</code>) æ–°å»ºä¸€ä¸ª config æ–‡ä»¶ï¼Œæ²¡æœ‰åç¼€åã€‚</p>
<h3 id="linuxmacos-ç³»ç»Ÿå†™å…¥ä»¥ä¸‹é…ç½®">Linux/MacOS ç³»ç»Ÿå†™å…¥ä»¥ä¸‹é…ç½®ï¼š</h3>
<pre><code class="language-shell"># éœ€è¦ netcat
Host github.com
  User git
  Port 22
  Hostname github.com
  TCPKeepAlive yes
  ProxyCommand nc -v -x 127.0.0.1:1080 %h %p
</code></pre>
<h3 id="windowsç³»ç»Ÿé…ç½®">Windowsç³»ç»Ÿé…ç½®</h3>
<p>éœ€è¦é¢å¤–å®‰è£…<code>connect.exe</code>ç¨‹åº,å¦‚æœæ‰¾ä¸åˆ° connect å‘½ä»¤é‚£ä¹ˆæŒ‡å®šå…¶ç»å¯¹è·¯å¾„ï¼Œä¸€èˆ¬åœ¨ git å®‰è£…ç›®å½•ä¸‹ \mingw64\bin\connect.exeã€‚</p>
<pre><code class="language-shell">Host github.com
  User git
  Port 22
  Hostname github.com
  TCPKeepAlive yes
  # -S ä¸º socks, -H ä¸º HTTP
  ProxyCommand connect -S 127.0.0.1:1080 %h %p
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Linuxä¸‹ä½¿ç”¨curlæŸ¥çœ‹httpè¯·æ±‚å„é˜¶æ®µè€—æ—¶]]></title>
        <id>https://stardemo.github.io/post/linux-xia-shi-yong-curl-cha-kan-http-qing-qiu-ge-jie-duan-hao-shi/</id>
        <link href="https://stardemo.github.io/post/linux-xia-shi-yong-curl-cha-kan-http-qing-qiu-ge-jie-duan-hao-shi/">
        </link>
        <updated>2021-04-07T15:50:42.000Z</updated>
        <summary type="html"><![CDATA[<p>HTTPæ¥å£åœ¨ä¸šåŠ¡ä¸­é€Ÿåº¦è¾ƒæ…¢ï¼Œä½¿ç”¨curlè¿›è¡Œæ’æŸ¥</p>
]]></summary>
        <content type="html"><![CDATA[<p>HTTPæ¥å£åœ¨ä¸šåŠ¡ä¸­é€Ÿåº¦è¾ƒæ…¢ï¼Œä½¿ç”¨curlè¿›è¡Œæ’æŸ¥</p>
<!-- more -->
<h2 id="1-å‡†å¤‡æ–‡ä»¶æ¨¡ç‰ˆcurltxt">1. å‡†å¤‡æ–‡ä»¶æ¨¡ç‰ˆï¼ˆcurl.txtï¼‰</h2>
<pre><code class="language-shell">\n
            time_namelookup:  %{time_namelookup}\n
               time_connect:  %{time_connect}\n
            time_appconnect:  %{time_appconnect}\n
           time_pretransfer:  %{time_pretransfer}\n
              time_redirect:  %{time_redirect}\n
         time_starttransfer:  %{time_starttransfer}\n
                            ----------\n
                 time_total:  %{time_total}\n
\n
</code></pre>
<h2 id="2-ä½¿ç”¨curlå¸¦ä»¥ä¸‹å‚æ•°è¯·æ±‚">2. ä½¿ç”¨curlå¸¦ä»¥ä¸‹å‚æ•°è¯·æ±‚</h2>
<pre><code class="language-shell">curl -w &quot;@curl.txt&quot; -o /dev/null -s https://api.example.com
</code></pre>
<p>ç»“æœ</p>
<pre><code>[@ ~]# curl -w &quot;@curl&quot; -o /dev/null -s https://api.example.com

            time_namelookup:  0.004
               time_connect:  0.014
            time_appconnect:  0.141
           time_pretransfer:  0.141
              time_redirect:  0.000
         time_starttransfer:  0.153
                            ----------
                 time_total:  0.165
</code></pre>
<h2 id="3-å‚æ•°è¯´æ˜">3. å‚æ•°è¯´æ˜</h2>
<ul>
<li>NAMELOOKUPï¼šä»å¼€å§‹è®¡ç®—ï¼ŒåŸŸåè§£æå®Œæˆçš„è€—æ—¶</li>
</ul>
<p>CURLINFO_NAMELOOKUP_TIME. The time it took from the start until the name resolving was completed.</p>
<ul>
<li>CONNECTï¼šä»å¼€å§‹è®¡ç®—ï¼ŒTCPå»ºç«‹å®Œæˆçš„è€—æ—¶</li>
</ul>
<p>CURLINFO_CONNECT_TIME. The time it took from the start until the connect to the remote host (or proxy) was completed.</p>
<ul>
<li>APPCONNECTï¼šä»å¼€å§‹è®¡ç®—ï¼Œåº”ç”¨å±‚ï¼ˆSSLï¼Œåœ¨TCPä¹‹ä¸Šçš„åº”ç”¨å±‚ï¼‰è¿æ¥/æ¡æ‰‹å®Œæˆçš„è€—æ—¶</li>
</ul>
<p>CURLINFO_APPCONNECT_TIME. The time it took from the start until the SSL connect/handshake with the remote host was completed. (Added in in 7.19.0)</p>
<ul>
<li>PRETRANSFERï¼šä»å¼€å§‹è®¡ç®—ï¼Œå‡†å¤‡å¼€å§‹ä¼ è¾“æ•°æ®çš„è€—æ—¶</li>
</ul>
<p>CURLINFO_PRETRANSFER_TIME. The time it took from the start until the file transfer is just about to begin. This includes all pre-transfer commands and negotiations that are specific to the particular protocol(s) involved.</p>
<ul>
<li>STARTTRANSFERï¼šä»å¼€å§‹è®¡ç®—ï¼Œå¼€å§‹ä¼ è¾“æ•°æ®çš„è€—æ—¶ï¼ˆlibcurlæ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼‰</li>
</ul>
<p>CURLINFO_STARTTRANSFER_TIME. The time it took from the start until the first byte is received by libcurl.</p>
<ul>
<li>TOTALï¼šæ€»çš„è€—æ—¶</li>
</ul>
<p>CURLINFO_TOTAL_TIME. Total time of the previous request.</p>
<ul>
<li>REDIRECTï¼šæ•´ä¸ªè¿‡ç¨‹é‡å®šå‘çš„è€—æ—¶ï¼Œå¦‚æœæ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰é‡å®šå‘ï¼Œè¿™ä¸ªæ—¶é—´ä¸º0</li>
</ul>
<p><em><strong>æ–‡ç« æ¥æºäºäº’è”ç½‘,åŸåœ°å€<a href="https://www.cnblogs.com/lnlvinso/p/9775484.html">https://www.cnblogs.com/lnlvinso/p/9775484.html</a></strong></em></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åœ¨macOSä¸‹å¯ç”¨CGO_ENABLEDçš„äº¤å‰ç¼–è¯‘]]></title>
        <id>https://stardemo.github.io/post/zai-macos-xia-qi-yong-cgo_enabled-de-jiao-cha-bian-yi/</id>
        <link href="https://stardemo.github.io/post/zai-macos-xia-qi-yong-cgo_enabled-de-jiao-cha-bian-yi/">
        </link>
        <updated>2021-03-26T12:15:00.000Z</updated>
        <summary type="html"><![CDATA[<p>go å¯ç”¨CGO_ENABLEDé‡åˆ°æŠ¥é”™çš„è§£å†³æ–¹æ¡ˆ<br>
<code>gcc_libinit_windows.c:7:10: fatal error: 'windows.h' file not found</code></p>
]]></summary>
        <content type="html"><![CDATA[<p>go å¯ç”¨CGO_ENABLEDé‡åˆ°æŠ¥é”™çš„è§£å†³æ–¹æ¡ˆ<br>
<code>gcc_libinit_windows.c:7:10: fatal error: 'windows.h' file not found</code></p>
<!-- more -->
<h2 id="åœ¨macosä¸‹å¯ç”¨cgo_enabledçš„äº¤å‰ç¼–è¯‘">åœ¨macOSä¸‹å¯ç”¨CGO_ENABLEDçš„äº¤å‰ç¼–è¯‘</h2>
<p>åœ¨å¯ç”¨CGO_ENABLEDçš„æƒ…å†µä¸‹ï¼Œå°è¯•ä½¿ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡ŒWindowså¹³å°çš„äº¤å‰ç¼–è¯‘ï¼š</p>
<pre><code class="language-shell">$ CGO_ENABLED=1 GOOS=windows GOARCH=386 go build -x -v -ldflags &quot;-s -w&quot;
</code></pre>
<p>å‡ºç°é”™è¯¯å¦‚ä¸‹ï¼š</p>
<pre><code class="language-shell"># runtime/cgo
gcc_libinit_windows.c:7:10: fatal error: 'windows.h' file not found
</code></pre>
<h2 id="å®‰è£…mingw-w64">å®‰è£…mingw-w64</h2>
<pre><code class="language-shell">$ brew install mingw-w64
==&gt; Downloading https://homebrew.bintray.com/bottles/isl-0.22.1.big_sur.bottle.tar.gz
==&gt; Downloading from https://d29vzk4ow07wi7.cloudfront.net/15376fb7aff7adec3786e6a31ec9b5cad585fd01ecbd5c4744ef9461b10965ff?response-content-disposition=attachment%3Bfilename%3D%22isl-0.22.1.big_sur.bottle.tar.gz%22&amp;Policy=eyJTdGF0Z
######################################################################## 100.0%
==&gt; Downloading https://homebrew.bintray.com/bottles/mpfr-4.1.0.big_sur.bottle.tar.gz
==&gt; Downloading from https://d29vzk4ow07wi7.cloudfront.net/1e8eb0326f62d3461d420d98af6fc088daca481cae89fd77a75b420d2e76d776?response-content-disposition=attachment%3Bfilename%3D%22mpfr-4.1.0.big_sur.bottle.tar.gz%22&amp;Policy=eyJTdGF0Z
######################################################################## 100.0%
==&gt; Downloading https://homebrew.bintray.com/bottles/libmpc-1.2.1.big_sur.bottle.tar.gz
######################################################################## 100.0%
==&gt; Downloading https://homebrew.bintray.com/bottles/mingw-w64-8.0.0.catalina.bottle.tar.gz
==&gt; Downloading from https://d29vzk4ow07wi7.cloudfront.net/d294bc0e960294bf573b9da364a8d95a06a257aec8f388c16e2b975ed8e4410c?response-content-disposition=attachment%3Bfilename%3D%22mingw-w64-8.0.0.catalina.bottle.tar.gz%22&amp;Policy=eyJ
######################################################################## 100.0%
==&gt; Installing dependencies for mingw-w64: isl, mpfr and libmpc
==&gt; Installing mingw-w64 dependency: isl
==&gt; Pouring isl-0.22.1.big_sur.bottle.tar.gz
ğŸº  /usr/local/Cellar/isl/0.22.1: 72 files, 4.9MB
==&gt; Installing mingw-w64 dependency: mpfr
==&gt; Pouring mpfr-4.1.0.big_sur.bottle.tar.gz
ğŸº  /usr/local/Cellar/mpfr/4.1.0: 30 files, 5.2MB
==&gt; Installing mingw-w64 dependency: libmpc
==&gt; Pouring libmpc-1.2.1.big_sur.bottle.tar.gz
ğŸº  /usr/local/Cellar/libmpc/1.2.1: 13 files, 425.0KB
==&gt; Installing mingw-w64
==&gt; Pouring mingw-w64-8.0.0.catalina.bottle.tar.gz
ğŸº  /usr/local/Cellar/mingw-w64/8.0.0: 7,402 files, 854.6MB
$ which x86_64-w64-mingw32-gcc
/usr/local/bin/x86_64-w64-mingw32-gcc
</code></pre>
<h2 id="ç¼–è¯‘x64">ç¼–è¯‘x64</h2>
<h3 id="å¯æ‰§è¡Œæ–‡ä»¶">å¯æ‰§è¡Œæ–‡ä»¶</h3>
<pre><code class="language-shell">$ CGO_ENABLED=1 CC=x86_64-w64-mingw32-gcc CXX=x86_64-w64-mingw32-g++ GOOS=windows GOARCH=amd64 go build -x -v -ldflags &quot;-s -w&quot; -o app.exe
</code></pre>
<h3 id="é™æ€åº“">é™æ€åº“</h3>
<pre><code class="language-shell">$ CGO_ENABLED=1 CC=x86_64-w64-mingw32-gcc CXX=x86_64-w64-mingw32-g++ GOOS=windows GOARCH=amd64 go build -buildmode=c-archive -x -v -ldflags &quot;-s -w&quot; -o bin app.go
</code></pre>
<h3 id="åŠ¨æ€åº“">åŠ¨æ€åº“</h3>
<p>å°†<code>-buildmode=c-archive</code>æ”¹ä¸º<code>-buildmode=c-shared</code>å³å¯</p>
<p><em><strong>è½¬è½½èµ„æ–™ å‡ºå¤„:<a href="https://www.dllhook.com/post/244.html">https://www.dllhook.com/post/244.html</a></strong></em></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Kubernetesæš´éœ²ä¿¡æ¯ç»™Pod]]></title>
        <id>https://stardemo.github.io/post/kubernetes-bao-lu-xin-xi-gei-pod/</id>
        <link href="https://stardemo.github.io/post/kubernetes-bao-lu-xin-xi-gei-pod/">
        </link>
        <updated>2021-02-06T08:53:01.000Z</updated>
        <content type="html"><![CDATA[<h3 id="capabilities-of-the-downward-api">Capabilities of the Downward API</h3>
<h4 id="feildrefå³å¯ä»¥æš´éœ²çš„podå®šä¹‰ä¸­çš„é¡¹ç›®">feildRefï¼Œå³å¯ä»¥æš´éœ²çš„podå®šä¹‰ä¸­çš„é¡¹ç›®ï¼š</h4>
<pre><code>spec.nodeName - the nodeâ€™s name
status.hostIP - the nodeâ€™s IP
metadata.name - the podâ€™s name
metadata.namespace - the podâ€™s namespace
status.podIP - the podâ€™s IP address
spec.serviceAccountName - the podâ€™s service account name
metadata.uid - the podâ€™s UID
metadata.labels['&lt;KEY&gt;'] - the value of the podâ€™s label &lt;KEY&gt; (for example, metadata.labels['mylabel']); available in Kubernetes 1.9+
metadata.annotations['&lt;KEY&gt;'] - the value of the podâ€™s annotation &lt;KEY&gt; (for example, metadata.annotations['myannotation']); available in Kubernetes 1.9+
</code></pre>
<h4 id="resourcefieldrefå³å¯ä»¥æš´éœ²çš„containerå®šä¹‰ä¸­çš„é¡¹ç›®">resourceFieldRefï¼Œå³å¯ä»¥æš´éœ²çš„containerå®šä¹‰ä¸­çš„é¡¹ç›®ï¼š</h4>
<ul>
<li>A Containerâ€™s CPU limit</li>
<li>A Containerâ€™s CPU request</li>
<li>A Containerâ€™s memory limit</li>
<li>A Containerâ€™s memory request</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[LDAPä½¿ç”¨è®°å½•]]></title>
        <id>https://stardemo.github.io/post/ldap-shi-yong-ji-lu/</id>
        <link href="https://stardemo.github.io/post/ldap-shi-yong-ji-lu/">
        </link>
        <updated>2020-12-11T07:00:44.000Z</updated>
        <content type="html"><![CDATA[<!-- more -->
<h2 id="rancherè®¿é—®ldapçš„é»˜è®¤è§„åˆ™">Rancherè®¿é—®LDAPçš„é»˜è®¤è§„åˆ™</h2>
<h3 id="ç”¨æˆ·">ç”¨æˆ·</h3>
<pre><code>æœç´¢èµ·ç‚¹: ou=Users,dc=thecover,dc=cn
å¯¹è±¡åˆ†ç±»: inetOrgPerson
ç™»å½•å­—æ®µ: uid
åç§°å­—æ®µ: cn
æœç´¢å­—æ®µ: uid|sn|givenName
å¯ç”¨å­—æ®µ:
ç¦ç”¨ä½æ©ç : 0
</code></pre>
<h3 id="ç”¨æˆ·ç»„">ç”¨æˆ·ç»„</h3>
<pre><code>æœç´¢èµ·ç‚¹: ou=Groups,dc=thecover,dc=cn
å¯¹è±¡åˆ†ç±»: groupOfNames
åç§°å­—æ®µ: cn
æœç´¢å­—æ®µ: cn
</code></pre>
<h3 id="åˆ›å»ºåªè¯»ç”¨æˆ·">åˆ›å»ºåªè¯»ç”¨æˆ·</h3>
<ul>
<li>åˆ›å»ºç”¨æˆ·ï¼ˆå¯ä»¥ç”¨ç®¡ç†å·¥å…·åˆ›å»ºåŒobjectClassçš„ç”¨æˆ·ï¼‰</li>
</ul>
<pre><code>#å¯†ç 
LDAP_READONLY_USER_PW='å¯†ç '
#Base DN
LDAP_BASE_DN='dc=thecover,dc=cn'
cat &lt;&lt;EOF &gt; ./readOnly.ldif
dn: cn=readonly,${LDAP_BASE_DN}
cn: readonly
objectClass: simpleSecurityObject
objectClass: organizationalRole
description: LDAP read only user
userPassword: ${LDAP_READONLY_USER_PW}
EOF
</code></pre>
<p>å‘½ä»¤è¡Œå¢åŠ ç”¨æˆ·</p>
<pre><code>ldapadd -x -D cn=Manager,dc=okcoin,dc=com -w 'å¯†ç ' -f ./readOnly.ldif
</code></pre>
<ul>
<li>é…ç½®æƒé™</li>
</ul>
<pre><code>LDAP_BASE_DN='dc=thecover,dc=cn'
cat &lt;&lt;EOF &gt; readonly-user-acl.ldif
dn: olcDatabase={1}hdb,cn=config
changetype: modify
delete: olcAccess
-
add: olcAccess
olcAccess: {0}to attrs=userPassword,shadowLastChange 
 by dn=&quot;cn=admin,dc=thecover,dc=cn&quot; write 
 by anonymous auth 
 by self write 
 by dn=&quot;cn=readonly,dc=thecover,dc=cn&quot; read 
 by * none
olcAccess: {1}to dn.base=&quot;&quot; by * read
olcAccess: {2}to * by dn=&quot;cn=Manager,dc=thecover,dc=cn&quot; write by * read
EOF
</code></pre>
<pre><code>ldapmodify -Y EXTERNAL -H ldapi:/// -f readonly-user-acl.ldif
</code></pre>
<ul>
<li>å¤‡æ³¨<br>
é…ç½®æƒé™æ—¶éœ€è¦ä½¿ç”¨</li>
</ul>
<pre><code>slapcat -b cn=config
</code></pre>
<p>å®šä½<code>olcDatabase</code> <code>config</code>çš„ä½ç½®</p>
<h2 id="ldapå¢åŠ memberofå±æ€§">Ldapå¢åŠ memberOfå±æ€§</h2>
<p>https://www.linuxprobe.com/enable-memberof-openldap.html<br>
https://kifarunix.com/how-to-create-openldap-member-groups/</p>
<h2 id="é…ç½®ç¼“å­˜">é…ç½®ç¼“å­˜</h2>
<h3 id="æŸ¥è¯¢ç¼“å­˜é…ç½®">æŸ¥è¯¢ç¼“å­˜é…ç½®</h3>
<pre><code class="language-shell">ldapsearch -Q -LLL -Y EXTERNAL -H ldapi:/// -b cn=config 'olcDatabase={0}mdb' olcDbindex
</code></pre>
<h3 id="åˆ é™¤æ—§é…ç½®">åˆ é™¤æ—§é…ç½®</h3>
<pre><code class="language-shell">cat &gt;&gt; del-1mdb-index.ldif &lt;&lt; EOF
dn: olcDatabase={1}mdb, cn=config
changetype:modify
delete: olcDbIndex
olcDbIndex: uid eq
EOF
 ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f del-1mdb-index.ldif
</code></pre>
<h3 id="æ–°å¢é…ç½®">æ–°å¢é…ç½®</h3>
<pre><code class="language-shell">cat &gt;&gt; mdb-index.ldif &lt;&lt; EOF
dn: olcDatabase={1}mdb, cn=config
changetype:modify
add:olcDbIndex
olcDbIndex: uid pres,eq,sub
EOF
ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f mdb-index.ldif
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[é˜¿é‡Œäº‘K8så®è·µç¬”è®°]]></title>
        <id>https://stardemo.github.io/post/a-li-yun-k8s-zui-jia-shi-jian-bi-ji/</id>
        <link href="https://stardemo.github.io/post/a-li-yun-k8s-zui-jia-shi-jian-bi-ji/">
        </link>
        <updated>2020-09-16T03:36:16.000Z</updated>
        <summary type="html"><![CDATA[<p>è®°å½•ä½¿ç”¨é˜¿é‡Œäº‘ACKå®¹å™¨æœåŠ¡ä»¥åŠé˜¿é‡Œäº‘çš„å„æœåŠ¡çš„æ€»ç»“ç¬”è®°</p>
]]></summary>
        <content type="html"><![CDATA[<p>è®°å½•ä½¿ç”¨é˜¿é‡Œäº‘ACKå®¹å™¨æœåŠ¡ä»¥åŠé˜¿é‡Œäº‘çš„å„æœåŠ¡çš„æ€»ç»“ç¬”è®°</p>
<!-- more -->
<h2 id="1-é…ç½®é˜¿é‡Œäº‘slbåˆ°é›†ç¾¤çš„ingress">1. é…ç½®é˜¿é‡Œäº‘SLBåˆ°é›†ç¾¤çš„Ingress</h2>
<h3 id="11-åŒæ—¶ä½¿ç”¨ç§ç½‘slbä¸å…¬ç½‘slbé…åˆ">1.1 åŒæ—¶ä½¿ç”¨ç§ç½‘SLBä¸å…¬ç½‘SLBé…åˆ</h3>
<p><em>å¯¹äºä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œæ‚¨æœŸæœ›å®¹å™¨é›†ç¾¤å†…çš„æœåŠ¡æ—¢èƒ½å…è®¸å…¬ç½‘è®¿é—®ï¼ŒåŒæ—¶åˆå¸Œæœ›èƒ½è¢«åŒä¸€ä¸ªVPCä¸‹çš„å…¶ä»–æœåŠ¡ç›´æ¥è®¿é—®ï¼ˆä¸ç»è¿‡å…¬ç½‘ï¼‰ã€‚æ‚¨åªéœ€é¢å¤–éƒ¨ç½²ä¸€ä¸ªkube-system/nginx-ingress-lb-intranetæœåŠ¡ã€‚</em></p>
<p>ä½¿ç”¨é˜¿é‡Œäº‘åˆ›å»ºçš„å®¹å™¨é›†ç¾¤é»˜è®¤å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç»‘å®šåˆ°å…¬ç½‘çš„SLBï¼Œä½äº<code>kube-system</code>ä¸‹ã€‚åˆ›å»ºä¸€ä¸ªç¬¦åˆæœŸæœ›é…ç½®çš„å†…ç½‘SLBå®ä¾‹ï¼Œæ–°å¢ä¸€ä¸ªServiceæè¿°ï¼Œä½¿é›†ç¾¤è‡ªåŠ¨ç»‘å®šç›‘å¬åˆ°SLBã€‚</p>
<p>é…ç½®æ¨¡ç‰ˆ</p>
<pre><code class="language-yaml"># intranet nginx ingress slb service
apiVersion: v1
kind: Service
metadata:
 # è¿™é‡ŒæœåŠ¡å–åä¸ºnginx-ingress-lb-intranet
 name: nginx-ingress-lb-intranet
 namespace: kube-system
 labels:
   app: nginx-ingress-lb-intranet
 annotations:
   # æŒ‡æ˜SLBå®ä¾‹åœ°å€ç±»å‹ä¸ºç§ç½‘ç±»å‹
   service.beta.kubernetes.io/alicloud-loadbalancer-address-type: intranet
   # ä¿®æ”¹ä¸ºæ‚¨çš„ç§ç½‘SLBå®ä¾‹ID
   service.beta.kubernetes.io/alicloud-loadbalancer-id: &lt;YOUR_INTRANET_SLB_ID&gt;
   # æ˜¯å¦è‡ªåŠ¨åˆ›å»ºSLBç«¯å£ç›‘å¬ï¼ˆä¼šè¦†å†™å·²æœ‰ç«¯å£ç›‘å¬ï¼‰ï¼Œä¹Ÿå¯æ‰‹åŠ¨åˆ›å»ºç«¯å£ç›‘å¬
   service.beta.kubernetes.io/alicloud-loadbalancer-force-override-listeners: 'true'
spec:
 type: LoadBalancer
 # route traffic to other nodes
 externalTrafficPolicy: &quot;Cluster&quot;
 ports:
 - port: 80
   name: http
   targetPort: 80
 - port: 443
   name: https
   targetPort: 443
 selector:
   # select app=ingress-nginx pods
   app: ingress-nginx
</code></pre>
<p>åˆ›å»ºæœåŠ¡ä¹‹åé€šè¿‡å¦‚ä¸‹å‘½ä»¤,æŸ¥çœ‹svcçŠ¶æ€</p>
<pre><code class="language-shell"> kubectl -n kube-system get svc | grep nginx-ingress-lb
</code></pre>
<h2 id="2-corednsçš„ç‰¹æ®Šç”¨æ³•">2. CoreDNSçš„ç‰¹æ®Šç”¨æ³•</h2>
<h3 id="21-corednsæ‹¦æˆªåŸŸåè§£æ">2.1 CoreDNSæ‹¦æˆªåŸŸåè§£æ</h3>
<p>åœ¨å†…ç½‘å¤šä¸ªé›†ç¾¤çš„åœºæ™¯ä¸‹ï¼Œæœ‰äº›åŸŸåéœ€è¦è§£æåˆ°å†…ç½‘é¿å…å‡ºç°å…¬ç½‘æµé‡ï¼Œä¹‹å‰å¤„ç†æ–¹æ¡ˆæœ‰å¦‚ä¸‹å‡ ç§:</p>
<ul>
<li>åœ¨VPCå†…ç½‘å†…è‡ªå»ºä¸€ä¸ªDNSæœåŠ¡å™¨ï¼Œå°†æ‰€æœ‰æœåŠ¡å™¨çš„DNSæŒ‡å‘è‡ªå»ºçš„DNSæœåŠ¡å™¨
<ul>
<li>é—®é¢˜: éœ€è¦è€ƒè™‘åˆ°DNSçš„é«˜å¯ç”¨ä»¥åŠæ•…éšœå®¹ç¾éš¾</li>
<li>ä¼˜åŠ¿: é›†ä¸­åŒ–,ä¾¿äºç»Ÿä¸€ç»´æŠ¤ç®¡ç†æ›´æ–°</li>
</ul>
</li>
<li>åœ¨ä¸»æœºé…ç½®Hostsæ–‡ä»¶
<ul>
<li>é—®é¢˜: ä¸»æœºè¾ƒå¤šï¼Œç»´æŠ¤æˆæœ¬ä¸Šæ¶¨</li>
<li>ä¼˜åŠ¿: æ“ä½œç®€å•ï¼ŒæŠ€æœ¯æˆæœ¬è¾ƒä½</li>
</ul>
</li>
<li>K8så®¹å™¨é›†ç¾¤å†…CoreDNS</li>
</ul>
<p>Kubernetesæœ¬èº«å…·æœ‰é›†ç¾¤DNSç»„ä»¶ï¼Œæ­¤å¤„ä½¿ç”¨çš„ä¸ºCoreDNSï¼Œå·¥ä½œè´Ÿè½½çš„DNSé»˜è®¤ç­–ç•¥ä¸º<code>ClusterFirst</code>,æ­¤æ—¶Podså†…ç¨‹åºè§£æDNSä¼šä¼˜å…ˆæŸ¥è¯¢é›†ç¾¤çš„DNSç»„ä»¶ï¼Œæ‰€ä»¥æ­¤æ—¶å¯ä»¥åœ¨é›†ç¾¤DNSå±‚é¢è¿›è¡Œè§£ææ‹¦æˆªè¦†ç›–ã€‚</p>
<p>CoreDNSçš„é…ç½®ä½¿ç”¨çš„ConfigMap,è€ŒConfigMapæ”¯æŒçƒ­æ›´æ–°,ä¿®æ”¹ConfigMapåCoreDNSè‡ªåŠ¨ç”Ÿæ•ˆã€‚é…ç½®å¦‚ä¸‹:</p>
<pre><code>.:5353 {
cache 30
errors
health
kubernetes cluster.local in-addr.arpa ip6.arpa {
pods insecure
upstream /etc/resolv.conf
fallthrough in-addr.arpa ip6.arpa
}
loadbalance round_robin
hosts {
122.212.222.111 aaa.bbb.com
fallthrough
}
prometheus 0.0.0.0:9153
proxy . /etc/resolv.conf
reload
}
</code></pre>
<p>æŠŠéœ€è¦çš„DNSè§„æ ¼å†™å…¥HostsèŠ‚ç‚¹ä¸‹ï¼Œå³å¯è¿›è¡Œé›†ç¾¤å±‚é¢çš„è§£æé…ç½®ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä½¿ç”¨ncæ£€æµ‹TCP/UDPç«¯å£å¼€æ”¾]]></title>
        <id>https://stardemo.github.io/post/shi-yong-nc-jian-ce-tcpudp-duan-kou-kai-fang/</id>
        <link href="https://stardemo.github.io/post/shi-yong-nc-jian-ce-tcpudp-duan-kou-kai-fang/">
        </link>
        <updated>2020-08-18T13:40:09.000Z</updated>
        <content type="html"><![CDATA[<h1 id="telnet-æ£€æµ‹tcpç«¯å£">Telnet æ£€æµ‹TCPç«¯å£</h1>
<pre><code class="language-shell">[root@localhost ~]# telnet 127.0.0.1 8080
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
^CConnection closed by foreign host.
</code></pre>
<h1 id="nc-æ£€æµ‹tcpç«¯å£">NC æ£€æµ‹TCPç«¯å£</h1>
<pre><code class="language-shell">[root@localhost ~]# nc -vz 127.0.0.1 8906
Connection to 127.0.0.1 8906 port [tcp/*] succeeded!
</code></pre>
<h1 id="nc-æ£€æµ‹udpç«¯å£">NC æ£€æµ‹UDPç«¯å£</h1>
<p><code>æ£€æµ‹udpç«¯å£çš„æ—¶å€™ä¸ä¼šç«‹å³è¿”å›æµ‹è¯•ç»“æœï¼Œå¯èƒ½éœ€è¦ç­‰å¾…å‡ ç§’é’Ÿ</code></p>
<pre><code class="language-shell">[root@apexsoft ~]# nc -uz 127.0.0.1 8907
Connection to 127.0.0.1 8907 port [udp/*] succeeded!
</code></pre>
]]></content>
    </entry>
</feed>